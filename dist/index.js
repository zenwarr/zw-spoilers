!function(e,t){for(var o in t)e[o]=t[o]}(exports,function(e){function t(n){if(o[n])return o[n].exports;var s=o[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var o={};return t.m=e,t.c=o,t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=o(1);t.DefaultOptions={rootSelector:".js-spoiler",headSelector:".js-spoiler__head",bodySelector:".js-spoiler__body",openedClass:"js-spoiler--opened",closedClass:"js-spoiler--closed",initedClass:"js-spoiler--inited",headOpenedClass:"js-spoiler__head--opened",headClosedClass:"js-spoiler__head--closed",bodyOpenedClass:"js-spoiler__body--opened",bodyClosedClass:"js-spoiler__body--closed",beforeChangeStateEvent:"before-spoiler-change-state",afterChangeStateEvent:"after-spoiler-change-state",openedTextAttr:"data-spoiler-opened-text",closedTextAttr:"data-spoiler-closed-text"};var r=function(e){function o(o,n){var s=e.call(this,o,n)||this;s._isOpened=!1;var r=s.root.querySelector(s.options.headSelector||t.DefaultOptions.headSelector||"");return r&&r.addEventListener("click",s._onHeadClick.bind(s)),s.options.openedClass&&s.root.classList.contains(s.options.openedClass)?s.setOpened(!0):s._syncClasses(),s.options.initedClass&&s.root.classList.add(s.options.initedClass),s._syncText(),s}return n(o,e),o.prototype.toggle=function(){return this.setOpened(!this.opened)},Object.defineProperty(o.prototype,"opened",{get:function(){return this._isOpened},enumerable:!0,configurable:!0}),o.prototype.setOpened=function(e){if((e=!!e)===this._isOpened)return!0;if(this.options.beforeChangeStateEvent){var t=new CustomEvent(this.options.beforeChangeStateEvent,{bubbles:!0,cancelable:!0,detail:{newStateIsOpened:e}});if(!this.root.dispatchEvent(t))return!1}if(this._isOpened=e,this._syncClasses(),this._syncText(),this.options.afterChangeStateEvent){var o=new CustomEvent(this.options.afterChangeStateEvent,{bubbles:!0,cancelable:!1,detail:{newStateIsOpened:e}});this.root.dispatchEvent(o)}return!0},o.prototype._onHeadClick=function(e){this.toggle(),e.preventDefault()},o.prototype._syncText=function(){var e=this,t=function(t){e._each("["+t+"]",function(e){e.textContent=e.getAttribute(t)})};this.options.openedTextAttr&&this.opened&&t(this.options.openedTextAttr),this.options.closedTextAttr&&!this.opened&&t(this.options.closedTextAttr)},o.prototype._syncClasses=function(){var e=this,t=function(t,o,n){e._each(t,function(t){t.classList.toggle(o||"",e._isOpened),t.classList.toggle(n||"",!e._isOpened)})};this.options.headSelector&&t(this.options.headSelector,this.options.headOpenedClass,this.options.headClosedClass),this.options.bodySelector&&t(this.options.bodySelector,this.options.bodyOpenedClass,this.options.bodyClosedClass),this.options.openedClass&&this.root.classList.toggle(this.options.openedClass,this._isOpened),this.options.closedClass&&this.root.classList.toggle(this.options.closedClass,!this._isOpened)},o}(s.Component);t.Spoiler=r,t.DefaultGroupOptions={rootSelector:".js-spoiler-group",spoilerRootSelector:t.DefaultOptions.rootSelector,spoilerAfterChangeStateEvent:t.DefaultOptions.afterChangeStateEvent,exclusiveAttr:"data-spoiler-group-exclusive",defaultExclusive:!1,openedIndexAttr:"data-spoiler-group-opened-index",defaultOpenedIndex:-1};var i=function(e){function o(o,n){var r=e.call(this,o,n)||this;if(r._curOpenedSpoiler=null,r._exclusive=!1,s.checkBinaryOptionAttr(r.root,r.options.exclusiveAttr,r.options.defaultExclusive||!1)&&(r._exclusive=!0),r.root.querySelector(r.options.rootSelector||t.DefaultOptions.rootSelector||""))throw new Error("Spoiler groups cannot be nested");var i=r.options.defaultOpenedIndex||-1;if(r.options.openedIndexAttr&&r.root.hasAttribute(r.options.openedIndexAttr)){var p=+(""+r.root.getAttribute(r.options.openedIndexAttr));isNaN(p)||(i=p)}if(!r.options.spoilerAfterChangeStateEvent)throw new Error("spoilerAfterChangeStateEvent option is empty");if(!r.options.spoilerRootSelector)throw new Error("spoilerRootSelector option is empty");var l=r.root.querySelectorAll(r.options.spoilerRootSelector);if(r.exclusive){for(var a=0;a<l.length;++a){var c=t.SpoilerFactory.fromRoot(l[a]);c&&c.opened&&(null!=r._curOpenedSpoiler?c.setOpened(!1):r._curOpenedSpoiler=c)}r.root.addEventListener(r.options.spoilerAfterChangeStateEvent,r._onSpoilerStateChanged.bind(r))}if(null==r._curOpenedSpoiler&&i>=0&&i<l.length){var d=t.SpoilerFactory.fromRoot(l[i]);d&&d.setOpened(!0)}return r}return n(o,e),Object.defineProperty(o.prototype,"exclusive",{get:function(){return this._exclusive},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"spoilerCount",{get:function(){return this.root.querySelectorAll(this.options.spoilerRootSelector||"").length},enumerable:!0,configurable:!0}),o.prototype._onSpoilerStateChanged=function(e){e.detail.newStateIsOpened&&this.exclusive&&(this._curOpenedSpoiler&&this._curOpenedSpoiler.root!==e.target&&this._curOpenedSpoiler.setOpened(!1),this._curOpenedSpoiler=t.SpoilerFactory.fromRoot(e.target))},o}(s.Component);t.SpoilerGroup=i,t.SpoilerFactory=new s.ComponentFactory("spoiler",t.DefaultOptions,r),t.SpoilerGroupFactory=new s.ComponentFactory("spoiler-group",t.DefaultGroupOptions,i)},function(e,t){e.exports=require("@zcomp/base")}]));