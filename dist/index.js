!function(e,t){for(var o in t)e[o]=t[o]}(exports,function(e){function t(r){if(o[r])return o[r].exports;var n=o[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var o={};return t.m=e,t.c=o,t.d=function(e,o,r){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,o){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=o(1);t.DefaultOptions={rootSelector:".js-spoiler",headSelector:".js-spoiler__head",bodySelector:".js-spoiler__body",openedClass:"js-spoiler--opened",closedClass:"js-spoiler--closed",initedClass:"js-spoiler--inited",beforeChangeStateEvent:"before-spoiler-change-state",afterChangeStateEvent:"after-spoiler-change-state",openedTextAttr:"data-spoiler-opened-text",closedTextAttr:"data-spoiler-closed-text"};var i=function(e){function o(o,r){var n=e.call(this,o,r)||this;n._isOpened=!1;var i=n.root.querySelector(n.options.headSelector||t.DefaultOptions.headSelector||"");return i&&i.addEventListener("click",n._onHeadClick.bind(n)),n.options.openedClass&&n.root.classList.contains(n.options.openedClass)?n.setOpened(!0):n.options.closedClass&&n.root.classList.add(n.options.closedClass),n.options.initedClass&&n.root.classList.add(n.options.initedClass),n._syncText(),n}return r(o,e),o.prototype.toggle=function(){return this.setOpened(!this.opened)},Object.defineProperty(o.prototype,"opened",{get:function(){return this._isOpened},enumerable:!0,configurable:!0}),o.prototype.setOpened=function(e){if((e=!!e)===this._isOpened)return!0;if(this.options.beforeChangeStateEvent){var t=new CustomEvent(this.options.beforeChangeStateEvent,{bubbles:!0,cancelable:!0,detail:{newStateIsOpened:e}});if(!this.root.dispatchEvent(t))return!1}if(this._isOpened=e,this.options.openedClass&&this.root.classList.toggle(this.options.openedClass,this._isOpened),this.options.closedClass&&this.root.classList.toggle(this.options.closedClass,!this._isOpened),this._syncText(),this.options.afterChangeStateEvent){var o=new CustomEvent(this.options.afterChangeStateEvent,{bubbles:!0,cancelable:!1,detail:{newStateIsOpened:e}});this.root.dispatchEvent(o)}return!0},o.prototype._onHeadClick=function(e){this.toggle(),e.preventDefault()},o.prototype._syncText=function(){var e=this,t=function(t){for(var o=e.root.querySelectorAll("["+t+"]"),r=0;r<o.length;++r)o[r].textContent=o[r].getAttribute(t)};this.options.openedTextAttr&&this.opened&&t(this.options.openedTextAttr),this.options.closedTextAttr&&!this.opened&&t(this.options.closedTextAttr)},o}(n.Component);t.Spoiler=i,t.DefaultGroupOptions={rootSelector:".js-spoiler-group",spoilerRootSelector:t.DefaultOptions.rootSelector,spoilerAfterChangeStateEvent:t.DefaultOptions.afterChangeStateEvent,exclusiveAttr:"data-spoiler-group-exclusive",defaultExclusive:!1,openedIndexAttr:"data-spoiler-group-opened-index",defaultOpenedIndex:-1};var s=function(e){function o(o,r){var i=e.call(this,o,r)||this;if(i._curOpenedSpoiler=null,i._exclusive=!1,n.checkBinaryOptionAttr(i.root,i.options.exclusiveAttr,i.options.defaultExclusive||!1)&&(i._exclusive=!0),i.root.querySelector(i.options.rootSelector||t.DefaultOptions.rootSelector||""))throw new Error("Spoiler groups cannot be nested");var s=i.options.defaultOpenedIndex||-1;if(i.options.openedIndexAttr&&i.root.hasAttribute(i.options.openedIndexAttr)){var p=+(""+i.root.getAttribute(i.options.openedIndexAttr));isNaN(p)||(s=p)}if(!i.options.spoilerAfterChangeStateEvent)throw new Error("spoilerAfterChangeStateEvent option is empty");if(!i.options.spoilerRootSelector)throw new Error("spoilerRootSelector option is empty");var l=i.root.querySelectorAll(i.options.spoilerRootSelector);if(i.exclusive){for(var a=0;a<l.length;++a){var c=t.SpoilerFactory.fromRoot(l[a]);c&&c.opened&&(null!=i._curOpenedSpoiler?c.setOpened(!1):i._curOpenedSpoiler=c)}i.root.addEventListener(i.options.spoilerAfterChangeStateEvent,i._onSpoilerStateChanged.bind(i))}if(null==i._curOpenedSpoiler&&s>=0&&s<l.length){var u=t.SpoilerFactory.fromRoot(l[s]);u&&u.setOpened(!0)}return i}return r(o,e),Object.defineProperty(o.prototype,"exclusive",{get:function(){return this._exclusive},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"spoilerCount",{get:function(){return this.root.querySelectorAll(this.options.spoilerRootSelector||"").length},enumerable:!0,configurable:!0}),o.prototype._onSpoilerStateChanged=function(e){e.detail.newStateIsOpened&&this.exclusive&&(this._curOpenedSpoiler&&this._curOpenedSpoiler.root!==e.target&&this._curOpenedSpoiler.setOpened(!1),this._curOpenedSpoiler=t.SpoilerFactory.fromRoot(e.target))},o}(n.Component);t.SpoilerGroup=s,t.SpoilerFactory=new n.ComponentFactory("spoiler",t.DefaultOptions,i),t.SpoilerGroupFactory=new n.ComponentFactory("spoiler-group",t.DefaultGroupOptions,s)},function(e,t){e.exports=require("@zcomp/base")}]));